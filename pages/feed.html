{% include pages/header.html %}
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAdaPDjie3JjSXaInNxD3MDcgQusP2Qk5c&callback=initMap"></script>
<link rel="stylesheet" href="/static/map.css"></link>
<script src="/static/map.js"></script>

{% for i, meme in enumerate(photo_list) %}

   <article id="article" class="post">
		<div class = "meta-primary-container">
			<img class="dp" src="{{ dp }}" />
			<a class="username" href="./profile/{{meme.username}}">{{ meme.username }}</a>
			<p class="location" style="cursor: pointer;" onclick="map.open( '{{ meme.latitude }}', '{{ meme.longitude }}' )">View Location</p>
			<p class="upvote">{{ check_upvotes(meme.ID) }}</p>
			<div class="meme-container">
				<a href="{{imglink}}/{{i}}"><img class="meme-image" src="{{ meme.image }}" alt= "image" /></a>	
				<p class="caption">{{ meme.caption }}</p>
				<p class="timestamp">{{ time_format(meme.timestamp) }}</p>
			</div>
		</div>
		<div class = "meme-image-container">
			
		</div>
		<div class = "meta-secondary-container">
      
      
		</div>
    <div>
      <button type="button" id="{{ meme.ID }}" name="button" class="upvote">Upvote</button>
		</div>
		<hr>
   </article>
{% end for %}

<script>
  [...document.getElementsByClassName("upvote")].forEach(element => {
    element.addEventListener("click", function(){
      fetch("/upvote_meme/" + element.id).then(function(){
        document.location.reload();
      })
    })
  })

</script>
