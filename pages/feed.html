{% include pages/header.html %}
{% for meme in photo_list %}
   <article id="article" class="post">
		<div class = "meta-primary-container">
			<img class="dp" src="{{ dp }}" />
			<p class="username">User: {{ meme.username }}</p>
			<p class="location">Meme Location: {{ meme.latitude, meme.longitude }}</p>
		</div>
		<div class = "meme-image-container">
			<img class="meme-image" src="{{ meme.image }}" alt= "image" />
		</div>
		<div class = "meta-secondary-container">
			<p class="caption">Caption: {{ meme.caption }}</p>
			<p class="timestamp">Time: {{ meme.timestamp }}</p>
      <p>Current upvote count: {{ check_upvotes(meme.ID) }}</p>
		</div>
    <div>
      <button type="button" id="{{ meme.ID }}" name="button" class="upvote">Upvote</button>
    </div>
   </article>
{% end for %}

<script>
  [...document.getElementsByClassName("upvote")].forEach(element => {
    element.addEventListener("click", function(){
      fetch("/upvote_meme/" + element.id).then(function(){
        document.location.reload();
      })
    })
  })

</script>
